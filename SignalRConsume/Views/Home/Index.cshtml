@{
    ViewData["Title"] = "Home Page";
}



@section Scripts{

    <script src="~/lib/microsoft/signalr/dist/browser/signalr.min.js"></script>
    <script type="text/javascript">
        $(document).ready(() => {
            debugger;
            var connection = new signalR.HubConnectionBuilder().withUrl("http://localhost:5174/VisitorHub").build();
            let connectionStatusElement = document.querySelector("#connectionStatus");

            //connection.onclose(() => {
            //    connectionStatusElement.innerText = "Disconnected";
            //});

            connection.start().then(() => {
                connectionStatusElement.innerText = connection.state;
            }).catch((err) => {
                console.log(err);
            });
        });


    </script>
}

<div class="container">
    <br />
    <div class="alert alert-danger">
        Connection State : <span id="connectionStatus"></span>
    </div>
</div>
